<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="gray-bg">
<div class="wrapper wrapper-content ">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <form class="form-horizontal m-t" id="signupForm">
                        <input id="pagename" name="pagename" value="indexImageEdit"
                               class="form-control" type="hidden">
<!--                        <input id="created" name="id" th:value="${#dates.format(apido.created, 'yyyy-MM-dd')}"-->
<!--                               class="form-control" type="hidden">-->
<!--                        <input id="updated" name="id" th:value="${#dates.format(apido.updated, 'yyyy-MM-dd')}"-->
<!--                               class="form-control" type="hidden">-->
                        <div class="form-group">
                            <label class="col-sm-3 control-label">接口名称：</label>
                            <div class="col-sm-8">
                                <input id="name" name="name"
                                       class="form-control" type="text">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">接口描述：</label>
                            <div class="col-sm-8">
                                <textarea cols="20" rows="5"  class="form-control"  name="desc">
                                </textarea>
                            </div>
                        </div>

<!--                        <div class="form-group">-->
<!--                            <label class="col-sm-3 control-label">图片地址(多条以英文逗号分隔)：</label>-->
<!--                            <div class="col-sm-8">-->
<!--                                <textarea cols="20" rows="5"   class="form-control"  name="data" id="data">-->
<!--                                </textarea>-->
<!--                            </div>-->
<!--                        </div>-->

                        <div class="form-group">
                            <label class="col-sm-3 control-label">图片1地址：</label>
                            <div class="col-sm-8">
                                <input  name="imgs[0].src"
                                       class="form-control" type="text">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">图片1跳转(多条英文逗号隔开)：</label>
                            <div class="col-sm-8">
                                <input  name="imgs[0].href"
                                       class="form-control" type="text">
                            </div>
                        </div>
                        <div class="form-group">
                        <label class="col-sm-3 control-label">图片1Alt：</label>
                        <div class="col-sm-8">
                            <input  name="imgs[0].alt"
                                    class="form-control" type="text">
                        </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">title(多条以 ||| 隔开,第一条视为标题)：</label>
                            <div class="col-sm-8">
                                <input  name="imgs[0].title"
                                        class="form-control" type="text">
                            </div>
                        </div>

                        </br>



                        <div class="form-group" id="myst">
                            <div class="col-sm-8 col-sm-offset-3">
                                <button type="button" class="btn btn-primary" id="mysubmint">添加接口</button>
                            </div>
                        </div>
                    </form>
                    <input  type="button" class="btn btn-primary"  value="添加字段" onclick="imgadd()" />
                </div>
            </div>
        </div>
    </div>
</div>
<div th:include="include::footer"></div>
<!--<script type="text/javascript" src="/js/appjs/common/dict/edit.js">-->
<!--</script>-->
<script th:inline="javascript">
    var index=0;
    function imgadd(){
        ++index;
        var domm=
            "                        <div class='form-group'>\n" +
            "                            <label class='col-sm-3 control-label'>图片"+(index+1)+"地址：</label>\n" +
            "                            <div class='col-sm-8'>\n" +
            "                                <input  name='imgs["+index+"].src'\n" +
            "                                       class='form-control' type='text'>\n" +
            "                            </div>\n" +
            "                        </div>\n" +
            "                        <div class='form-group'>\n" +
            "                            <label class='col-sm-3 control-label'>图片"+(index+1)+"跳转(多条英文逗号隔开)：</label>\n" +
            "                            <div class='col-sm-8'>\n" +
            "                                <input  name='imgs["+index+"].href'\n" +
            "                                       class='form-control' type='text'>\n" +
            "                            </div>\n" +
            "                        </div>\n" +
            "                        <div class='form-group'>\n" +
            "                            <label class='col-sm-3 control-label'>图片"+(index+1)+"Alt：</label>\n" +
            "                            <div class='col-sm-8'>\n" +
            "                                <input  name='imgs["+index+"].alt'\n" +
            "                                        class='form-control' type='text'>\n" +
            "                            </div>\n" +
            "                        </div>"+
            "                        <div class='form-group'>\n" +
            "                            <label class='col-sm-3 control-label'>"+(index+1)+"title(多条以 ||| 隔开)：</label>\n" +
            "                            <div class='col-sm-8'>\n" +
            "                                <input  name='imgs["+index+"].title'\n" +
            "                                       class='form-control' type='text'>\n" +
            "                            </div>\n" +
            "                        </div>\n" ;

        $("#myst").before(domm);
    }

    $(function(){
        $("#mysubmint").click(function () {


            $.post("/api/add/addIndexImagesAndParamApi",$("#signupForm").serialize(), function(data){
                if(data.code == 0){
                    parent.layer.msg("添加成功！！！");
                    window.setTimeout(function () {
                        location.reload();
                    },900);
                }else{
                    parent.layer.msg("添加失败！！！");
                }
            });
        });

    });
</script>

</body>
</html>
